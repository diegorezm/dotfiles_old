#!/bin/bash 

declare -a ops=("Catppuccin macchiato" 
"Ayu Dark"
)

esc=$(printf '%s\n'  "${ops[@]}" | dmenu  -p "Choose one:")

if [ -z "$esc" ]
then
  exit
fi

change_qtile () {
  qtile_path="$HOME/.config/qtile/"
  if [ "$esc" == "${ops[0]}" ]; then
    cd $qtile_path
    python3 "$HOME/.config/qtile/changeTheme.py" --theme=1
  elif [ "$esc" == "${ops[1]}" ]; then
    cd $qtile_path
    python3 "$HOME/.config/qtile/changeTheme.py" --theme=2
  fi
    qtile cmd-obj -o cmd -f reload_config
}

change_kitty () {
  kitty_path="$HOME/.config/kitty/"
  if [ "$esc" == "${ops[0]}" ]; then
    cd $kitty_path
    cp "colors/macchiato.conf"  "colorscheme.conf"
  elif [ "$esc" == "${ops[1]}" ]; then
    cd $kitty_path
    cp "colors/ayu.conf"  "colorscheme.conf"
  fi
}

change_neovim () {
  if [ "$esc" == "${ops[0]}" ]; then
    echo 'vim.cmd.colorscheme "catppuccin-macchiato"' > "$HOME/.config/nvim/lua/plugin/config/colorscheme.lua"
  elif [ "$esc" == "${ops[1]}" ]; then
    echo 'vim.cmd.colorscheme "ayu-dark"' > "$HOME/.config/nvim/lua/plugin/config/colorscheme.lua"
  fi
}

change_xresources(){
   xpath="$HOME/.config/Xresources/"
  if [ "$esc" == "${ops[0]}" ]; then
    cd $xpath
    cp "colorschemes/macchiato.Xresources" "$xpath/colors.Xresources"
  elif [ "$esc" == "${ops[1]}" ]; then
    cd $xpath
    cp "colorschemes/ayu-dark.Xresources" "$xpath/colors.Xresources"
  fi
   xrdb -merge ~/.config/Xresources/Xresources 
}

change_kitty && change_qtile && change_neovim && change_xresources
